# AirSpaceLocator Bot
**Бот разработан, чтобы обеспечить простой способ получения данных о 
местоположении воздушных судов в режиме реального времени.**
- ссылка на бот в Telegram: [AirSpaceLocator](https://t.me/AirLocatorBot).

## Используемые технологии
-  Python 3.
#### Модули (основные)
-  pyTelegramBotAPI.
-  basemap. 
-  dadata.
-  peewee

## Функционал
- [X] Получение данных с [AirLabs](https://airlabs.co/).
- [X] Фильтрация полученных данных(по высоте, типу, принадлежности).
- [X] Отрисовка полученных данных.
- [X] Получение подробной информации о воздушном судне с [SKYbrary](https://skybrary.aero/).

## TODO 
- [ ] Легенда карты.
- [ ] Создание отчетного файла.
- [ ] Парсинг информации с [SKYbrary](https://skybrary.aero/).

## Установка и запуск

### Установка

- Клонировать Git репозиторий.
```sh 
git clone https://github.com/tromv3/airspace_locator_bot.git
```
- Сменить директорию.
```sh 
cd python_basic_diploma
```
- Установить необходимые модули с помощью pip.
```sh 
pip install -r requirements.txt
```

### Конфигурация
Необходимо внести значения переменных в файл с расширением .ENV (файл конфигурации).

### Переменные в файле конфигурации

- `BOT_TOKEN` - токен Telegram ([BotFather](https://t.me/botfather)).
- `AIR_LABS_API_KEY` - API токен [AirLabs](https://airlabs.co/).
- `DADATA_TOKEN` - токен [DaData](https://dadata.ru/) (для использования геокодера).
- `DADATA_SECRET_KEY` - секретный ключ [DaData](https://dadata.ru/) (для использования геокодера).

### Запуск бота
```sh 
python main.py 
```

## Интерфейс пользователя
### Основные команды

| Команда    | Описание                                                                                                |
|:-----------|:--------------------------------------------------------------------------------------------------------|
| `/start`   | Запуск бота                                                                                             |
| `/cancel`  | Возвращение в главное меню                                                                              |
| `/help`    | Вывод справки по основным командам                                                                      |
| `/history` | Вывод последних 50 запросов пользователя (значение задается переменной `count_req` в файле `config.py`) |

### Основное меню
| Команда                             | Описание                                                                          |
|:------------------------------------|:----------------------------------------------------------------------------------|
| `Изменить имя`                      | Изменение имени пользователя                                                      |
| `Изменить местоположение`           | Изменение местоположения                                                          |
| `Получить данные о воздушных судах` | Получении информации с [AirLabs](https://airlabs.co/)                             |
| `Подробно о воздушном судне`        | Вывод подробной информации о воздушном судне с [SKYbrary](https://skybrary.aero/) |
| `Отрисовать полученные данные`      | Отрисовка полученной информации на карте                                          |

### Меню фильтров
| Команда                    | Описание                                |
|:---------------------------|:----------------------------------------|
| `Фильтр по высоте (max)`   | Фильтр по максимальной высоте           |
| `Фильтр по высоте (min)`   | Фильтр по минимальной высоте            |
| `Фильтр по типу`           | Фильтр по типу судна                    |
| `Фильтр по принадлежности` | Фильтр по принадлежности (стране) судна |
| `Показать воздушные суда`  | Вывод информации пользователю           |

### Меню местоположение
| Команда                         | Описание                                                                              |
|:--------------------------------|:--------------------------------------------------------------------------------------|
| `Ввести адрес`                  | Ввести адрес и получить координаты с помощью геодекодера [DaData](https://dadata.ru/) |
| `Ввести координаты`             | Ввод координат вручную                                                                |
| `Отправить свое местоположение` | Ввод местоположению с помощью геолокации                                              |

## Скриншоты интерфейса
![Screenshot_1.png](screenshotUI%2FScreenshot_1.png)

![Screenshot_2.png](screenshotUI%2FScreenshot_2.png)

![Screenshot_3.png](screenshotUI%2FScreenshot_3.png)

![Screenshot_4.png](screenshotUI%2FScreenshot_4.png)

![Screenshot_5.png](screenshotUI%2FScreenshot_5.png)

![Screenshot_6.png](screenshotUI%2FScreenshot_6.png)

![Screenshot_7.jpg](screenshotUI%2FScreenshot_7.jpg)
